# 中室研 2023年春休み計量経済学課題

___
## 計量経済学の課題について

問題URL(Notion)

https://sore-larkspur-ea3.notion.site/202303_-c95556437cd7462fa45bc5046ff51904

今回も理論の問題と実証の問題がありますが、今回はセクションが分かれていません。実証パートは基本的にRを使うことを前提としています。

___

## 提出方法

**4月の研究会の初回の前日23:59までにgoogle driveに提出**してください。ファイルの形式は問いません。一つのファイルにまとめられていれば嬉しいですが、難しい場合はフォルダ名を提出者の名前にしてフォルダにまとめて提出しても大丈夫です。数式の記述を求める問題もありますが、手書きのファイルを作成しても良いですし、直接wordやTeX,notion(TeX形式で書けます)で打ち込んでもいいですし、画像で貼り付けてもいいです。

今回、Notionで問題を作成するということを試みたので、notionで回答を作成し、そのURLを共有するという形でもOKです(つまりURLだけ載せたwordなりGoogle documentを提出してくれれば良いということになります)。

___

## このリポジトリの使い方

今回githubのリポジトリでプロジェクトディレクトリごと課題を用意したのは、できる限り研究に関するデータはこのような形で管理していただくのが良いだろうと思ったからです。僕の知る限りでは、`desktop`や`document`などのデフォルトのディレクトリ(フォルダ)にデータファイルやソースコードが雑多に放り投げているケースが多いと感じます。そして毎回`setwd(/Users/soichiro/...)`のような形で絶対パスで毎回作業ディレクトリを設定しているのではないでしょうか。これは、ただ整理整頓してほしいという要求ではありません。**研究の分析や処理の再現性を担保する**ことや、**プロジェクト単位で研究を管理する**ことを実践していくためです。rawデータだけでなく、それを加工したデータ、またどのように加工・分析したのかを記述したStataやRやpythonなどのソースコードも全て広義の**データ**であり、現在ではできる限りそれらを公表するよう求められることが多いと私は理解しています。ですので、今回の課題を通じてプロジェクトディレクトリによる管理や、Rプロジェクトの作成方法、（余裕がある人はgitによる管理）なども一緒に学んで行けたらと考えています。

### リポジトリのクローン(orデータのダウンロード)

> gitに慣れている人向け

gitやgithubの使い方にある程度慣れている人は、次のようにリポジトリをクローンしてください。

1. ターミナルを開き任意のディレクトリ(その配下にプロジェクトディレクトリを作りたい場所)に移動。例えば次のように移動したとします。

```sh
cd /Users/yourname/
```

2. 次のように実行してください

```sh
git clone git@github.com:soichiro-sugita/nakamurolab_2023_spring.git
```

これで、`/Users/yourname/nakamurolab_2023_spring`ができているはずです。`ls -a`などで確認してください。

**【重要】**

※ **僕(杉田)のリモートリポジトリの`master`ブランチにpushしないでください!!** つまり、自分のgithubで管理したければ、

```sh
git push (あなたのリモートリポジトリURL) master
```

などして自分のgithubで管理してください。あるいは作業ブランチを切ってください。

> gitに慣れていない人向け

 https://github.com/soichiro-sugita/nakamurolab_2023_spring にアクセスし、右上の方にある緑色の`code`というボタンをクリックし、プルダウンメニューから、`Download zip`をクリックします。これでzipファイルの形でリポジトリ(プロジェクトディレクトリ)が丸ごとダウンロードされますので、それを使ってください。

___

## Rprojectの作り方

1. Rstudioを起動し、`file`→`New Project`を選択します。
2. 新しいプロジェクトの作成方法が出てきますので、自分にあったものを選びます。`New Directory`を選ぶと新しいディレクトリ(フォルダ)を作成しつつそれをルートディレクトリとしらRprojectを作成してくれます。`Existing Directory`を選んだ場合は、既存のディレクトリを選択しそれをルートディレクトリとするRprojectが作られます。
3. 選択したディレクトリに`(ディレクトリ名).Rproj`というファイルが作られていればOKです。

わからなかったら「Rproject 作り方」などで検索してください。

___

## 相対パス

Rprojectを利用する上で威力を発揮するのが相対パスです。相対パスとは、あるディレクトリの場所を基準としたファイルのパス(場所)を示す方法です。それに対して絶対パスは、最も上の階層にあるディレクトリ(`/Users`)からの位置を示す方法です。

Rprojectでは、ルートディレクトリ(Rprojファイルがある場所。プロジェクトディレクトリ内で最も上の階層)からの相対パスでファイルのパスを指定することができます。相対パスの基準となるパスは`.`で表します。

※ ただし、Rmarkdownはファイルのあるディレクトリを基準とした相対パスなのでややこしいです。

例えば、次のような`sugita`というプロジェクトディレクトリがあったとして、

```sh
├── README.md
├── data
│   ├── README.html
│   ├── README.md
│   ├── in
│   │   └── anscombes.csv
│   └── out
├── document
├── figure
├── nakamurolab_2023_spring.Rproj
└── src
    ├── data
    │   └── make_dataset_DID.R
    └── visualization_anscombes.R
```

`sugita`はルートディレクトリなので`.`です。この時、`anscombes.csv`は

```sh
./data/in/anscombes.csv
```

になります。 例えば、データをインポートしたいとき、Rのスクリプトに

```R
data <- read.csv("./data/in/anscombes.csv")
```

と書けば、インポートできます。プロジェクトディレクトリを作り、Rprojectに指定し、`data`フォルダの決められた場所にデータファイル入れておけば「あれ、データはどこにしまってたんだっけ..?」ということが圧倒的に少なくなります。また、Rprojが使えるのなら`setwd()`は全く必要でなくなります。
